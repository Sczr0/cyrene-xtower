import{c as b,r as S,d as u,p as $,a as y,b as v,h as j,e as P,m as A,s as O}from"./DZ5MHDeQ.js";class H{anchor;#t=new Map;#o=new Map;#e=new Map;#n=!0;constructor(o,t=!0){this.anchor=o,this.#n=t}#r=()=>{var o=b;if(this.#t.has(o)){var t=this.#t.get(o),n=this.#o.get(t);if(n)S(n);else{var s=this.#e.get(t);s&&(this.#o.set(t,s.effect),this.#e.delete(t),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[r,i]of this.#t){if(this.#t.delete(r),r===o)break;const a=this.#e.get(i);a&&(u(a.effect),this.#e.delete(i))}for(const[r,i]of this.#o){if(r===t)continue;const a=()=>{if(Array.from(this.#t.values()).includes(r)){var l=document.createDocumentFragment();A(i,l),l.append(y()),this.#e.set(r,{effect:i,fragment:l})}else u(i);this.#o.delete(r)};this.#n||!n?$(i,a,!1):a()}}};#s=o=>{this.#t.delete(o);const t=Array.from(this.#t.values());for(const[n,s]of this.#e)t.includes(n)||(u(s.effect),this.#e.delete(n))};ensure(o,t){var n=b,s=O();if(t&&!this.#o.has(o)&&!this.#e.has(o))if(s){var r=document.createDocumentFragment(),i=y();r.append(i),this.#e.set(o,{effect:v(()=>t(i)),fragment:r})}else this.#o.set(o,v(()=>t(this.anchor)));if(this.#t.set(n,o),s){for(const[a,c]of this.#o)a===o?n.skipped_effects.delete(c):n.skipped_effects.add(c);for(const[a,c]of this.#e)a===o?n.skipped_effects.delete(c.effect):n.skipped_effects.add(c.effect);n.oncommit(this.#r),n.ondiscard(this.#s)}else j&&(this.anchor=P),this.#r()}}const g="zh-cn",p=["zh-cn","en","zh-tw"],z="PARAGLIDE_LOCALE",D=3456e4,C=["url","cookie","globalVariable","baseLocale"];globalThis.__paraglide={};let f,k=!1,w=()=>{let e;for(const o of C){if(o==="cookie")e=F();else if(o==="baseLocale")e=g;else if(o==="url"&&typeof window<"u")e=R(window.location.href);else if(o==="globalVariable"&&f!==void 0)e=f;else if(x(o)&&h.has(o)){const t=h.get(o);if(t){const n=t.getLocale();if(n instanceof Promise)continue;e=n}}if(e!==void 0){const t=B(e);return k||(f=t,k=!0,M(t,{reload:!1})),t}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const I=e=>{e?window.location.href=e:window.location.reload()};let M=(e,o)=>{const t={reload:!0,...o};let n;try{n=w()}catch{}const s=[];let r;for(const a of C)if(a==="globalVariable")f=e;else if(a==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const c=`${z}=${e}; path=/; max-age=${D}`;document.cookie=c}else{if(a==="baseLocale")continue;if(a==="url"&&typeof window<"u")r=m(window.location.href,{locale:e}).href;else if(x(a)&&h.has(a)){const c=h.get(a);if(c){let l=c.setLocale(e);l instanceof Promise&&(l=l.catch(E=>{throw new Error(`Custom strategy "${a}" setLocale failed.`,{cause:E})}),s.push(l))}}}const i=()=>{t.reload&&window.location&&e!==n&&I(r)};if(s.length)return Promise.all(s).then(()=>{i()});i()},L=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function d(e){return typeof e!="string"?!1:e?p.some(o=>o.toLowerCase()===e.toLowerCase()):!1}function B(e){if(typeof e!="string")throw new Error(`Invalid locale: ${e}. Expected a string.`);const o=e.toLowerCase(),t=p.find(n=>n.toLowerCase()===o);if(!t)throw new Error(`Invalid locale: ${e}. Expected one of: ${p.join(", ")}`);return t}function F(){if(typeof document>"u"||!document.cookie)return;const o=document.cookie.match(new RegExp(`(^| )${z}=([^;]+)`))?.[2];if(d(o))return o}let _,U;function R(e){const o=typeof e=="string"?e:e.href;if(_===o)return U;let t;return t=V(e),_=o,U=t,t}function V(e){const t=new URL(e,"http://dummy.com").pathname.split("/").filter(Boolean);if(t.length>0){const n=t[0];if(d(n))return n}return g}function m(e,o){return N(e,o)}function N(e,o){const t=typeof e=="string"?new URL(e,L()):new URL(e),n=o?.locale??w();if(R(t)===n)return t;const r=t.pathname.split("/").filter(Boolean);return r.length>0&&d(r[0])&&r.shift(),n===g?t.pathname="/"+r.join("/"):t.pathname="/"+n+"/"+r.join("/"),t}function J(e){return W(e)}function W(e){const o=typeof e=="string"?new URL(e,L()):new URL(e),t=o.pathname.split("/").filter(Boolean);return t.length>0&&d(t[0])&&(o.pathname="/"+t.slice(1).join("/")),o}function T(e,o){const t=w(),n=o?.locale??t,s=new URL(e,L()),r=m(s,{locale:n});return e.startsWith("/")&&s.origin===r.origin?n!==t&&m(s,{locale:t}).origin!==r.origin?r.href:r.pathname+r.search+r.hash:r.href}const h=new Map;function x(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{H as B,J as d,w as g,T as l,M as s};
